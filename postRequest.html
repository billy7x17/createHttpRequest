<html>
<head>
	<title>生成HTTP请求</title>
</head>
<body>
<form>
	<h1>
	请在URL栏中填写要访问的地址，后面Paras栏中是要添加的参数。
	</h1>

	<h3>URL:</h3>
	<input type="text">

	<h3>Paras:</h3>

	<h4>name = value</h4>

	<ul style="list-style:none;padding:0;">
		<li style="margin-bottom : 5px;">
			<input type="text" id="name1">

			=

			<input type="text" id="value1">

			<a href="javascript:addNewPara()" style="text-decoration:none;"><span style="font-size:15;">+</span></a>
		</li>	
	</ul>
</form>
<input type="button" onclick="pushRequest('get')" value="发送Get请求" />
<input type="button" onclick="pushRequest('post')" value="发送Post请求" />
<script type="text/javascript">
var form = document.forms[0];
var ul = form.lastElementChild;

function addNewPara() {
	/*取要进行复制的html*/

	var html = ul.lastElementChild.innerHTML;
	html = '<li style="margin-bottom : 5px;">' + html + '</li>';

	/*去掉'+'*/
	var a = ul.lastElementChild.lastElementChild;
	a.parentNode.removeChild(a);

	ul.innerHTML += html;

}

function pushRequest(method) {
	/*给表单指向赋值*/
	var url = form[0].value;
	if (IsURL(url)) {
		form.action = url;
		form.method = method;

		/*参数赋name value对*/
		var lis = ul.children;
		for (var i = 0; i < lis.length; i++)
			lis[i].children[1].name = lis[i].children[0].value;

		form.submit();
	} else{
		alert("URL输入不合法，请确认后重新输入");
		form[0].focus();
	}
}


function IsURL(str_url) {
	var strRegex = '^((https|http|ftp|rtsp|mms)?://)' + '?(([0-9a-z_!~*\'().&=+$%-]+: )?[0-9a-z_!~*\'().&=+$%-]+@)?' //ftp的user@ 
		+ '(([0-9]{1,3}.){3}[0-9]{1,3}' // IP形式的URL- 199.194.52.184 
		+ '|' // 允许IP和DOMAIN（域名） 
		+ '([0-9a-z_!~*\'()-]+.)*' // 域名- www. 
		+ '([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].' // 二级域名 
		+ '[a-z]{2,6})' // first level domain- .com or .museum 
		+ '(:[0-9]{1,4})?' // 端口- :80 
		+ '((/?)|' // a slash isn't required if there is no file name 
		+ '(/[0-9a-z_!~*\'().;?:@&=+$,%#-]+)+/?)$';
	var re = new RegExp(strRegex);
	//re.test() 
	if (re.test(str_url)) {
		return (true);
	} else {
		return (false);
	}
}
</script>
</body>
</html>